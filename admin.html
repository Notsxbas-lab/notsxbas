<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Admin - Gaming Info</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
                * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            display: flex;
        }
                .sidebar {
            width: 280px;
            background: linear-gradient(180deg, #2c3e50 0%, #34495e 100%);
            color: white;
            height: 100vh;
            padding: 0;
            box-shadow: 4px 0 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
        }
                .sidebar h2 {
            text-align: center;
            padding: 30px 20px;
            background: rgba(0,0,0,0.2);
            margin: 0;
            font-size: 24px;
            border-bottom: 3px solid #3498db;
        }
        .sidebar h2 i {
            margin-right: 10px;
            color: #3498db;
        }
                .sidebar ul {
            list-style: none;
            padding: 20px 0;
        }
                .sidebar ul li {
            padding: 0;
            margin: 5px 15px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
                .sidebar ul li a {
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            padding: 15px 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        .sidebar ul li a i {
            margin-right: 15px;
            font-size: 18px;
            width: 25px;
            text-align: center;
        }
                .sidebar ul li:hover {
            background-color: rgba(52, 152, 219, 0.2);
            transform: translateX(5px);
        }
        .sidebar ul li a:hover {
            color: #3498db;
        }
        .sidebar ul li.active {
            background-color: #3498db;
        }
        .sidebar ul li.active a {
            font-weight: bold;
        }
        .main-content {
            flex-grow: 1;
            padding: 20px;
            transition: margin-left 0.3s ease;
        }
        .sidebar.collapsed {
            width: 60px;
        }
        .sidebar.collapsed .sidebar h2 {
            display: none;
        }
        .sidebar.collapsed ul li a span {
            display: none;
        }
        .sidebar.collapsed ul li a i {
            margin-right: 0;
            width: 100%;
            text-align: center;
        }
        .sidebar.collapsed + .main-content {
            margin-left: 60px;
        }
        .toggle-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s ease;
        }
        .toggle-btn:hover {
            background: rgba(0,0,0,0.9);
        }
                .header {
            background: white;
            padding: 25px 30px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .header h1 {
            color: #2c3e50;
            font-size: 28px;
        }
        .header h1 i {
            color: #3498db;
            margin-right: 15px;
        }
        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .header-actions .btn-view-site {
            background: #27ae60;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        .header-actions .btn-view-site:hover {
            background: #229954;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .header-actions .btn {
            background: #3498db;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        .header-actions .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #2c3e50;
        }
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }
                .cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
                .card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--card-color), var(--card-color-light));
        }
        .card.blue {
            --card-color: #3498db;
            --card-color-light: #5dade2;
        }
        .card.green {
            --card-color: #2ecc71;
            --card-color-light: #58d68d;
        }
        .card.orange {
            --card-color: #e67e22;
            --card-color-light: #f39c12;
        }
        .card.purple {
            --card-color: #9b59b6;
            --card-color-light: #bb8fce;
        }
        .card h3 {
            margin: 15px 0 10px 0;
            color: #2c3e50;
            font-size: 16px;
            font-weight: 600;
        }
        .card .icon-wrapper {
            width: 70px;
            height: 70px;
            margin: 0 auto 15px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--card-color), var(--card-color-light));
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }
        .card i {
            font-size: 32px;
            color: white;
        }
        .card .number {
            font-size: 32px;
            font-weight: bold;
            color: var(--card-color);
            margin: 10px 0;
        }
        .card .trend {
            font-size: 14px;
            color: #27ae60;
            margin-top: 10px;
        }
        .card .trend.down {
            color: #e74c3c;
        }
                .card .trend i {
            font-size: 14px;
            margin-right: 5px;
        }
        .section {
            display: none;
        }
        .section.active {
            display: block;
        }
        .content-box {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        table th {
            background: #3498db;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        table td {
            padding: 15px;
            border-bottom: 1px solid #ecf0f1;
        }
        table tr:hover {
            background: #f8f9fa;
        }
        .btn-action {
            padding: 8px 15px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            margin-right: 5px;
            transition: all 0.3s ease;
        }
        .btn-edit {
            background: #f39c12;
            color: white;
        }
        .btn-delete {
            background: #e74c3c;
            color: white;
        }
        .btn-add {
            background: #2ecc71;
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        .btn-add:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }
        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }
        .status-active {
            background: #d5f4e6;
            color: #27ae60;
        }
        .status-inactive {
            background: #fadbd8;
            color: #e74c3c;
        }
        .game-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .game-logo {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border-radius: 6px;
            border: 2px solid #ecf0f1;
        }
    </style>
</head>
<body>
    <button class="toggle-btn" id="toggle-btn">
        <i class="fas fa-bars"></i>
        <span>Menú</span>
    </button>
    <div class="container">
        <div class="sidebar">
            <h2><i class="fas fa-gamepad"></i>Gaming Admin</h2>
            <ul>
                <li data-section="dashboard" class="active">
                    <a href="#">
                        <i class="fas fa-chart-line"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li data-section="visitantes">
                    <a href="#">
                        <i class="fas fa-users"></i>
                        <span>Visitantes</span>
                    </a>
                </li>
                <li data-section="juegos">
                    <a href="#">
                        <i class="fas fa-gamepad"></i>
                        <span>Juegos</span>
                    </a>
                </li>
                <li data-section="requisitos">
                    <a href="#">
                        <i class="fas fa-list"></i>
                        <span>Requisitos</span>
                    </a>
                </li>
                <li data-section="descripciones">
                    <a href="#">
                        <i class="fas fa-file-alt"></i>
                        <span>Descripciones</span>
                    </a>
                </li>
                <li data-section="noticias">
                    <a href="#">
                        <i class="fas fa-newspaper"></i>
                        <span>Noticias</span>
                    </a>
                </li>
                <li data-section="estadisticas">
                    <a href="#">
                        <i class="fas fa-bar-chart"></i>
                        <span>Estadísticas</span>
                    </a>
                </li>
                <li data-section="configuracion">
                    <a href="#">
                        <i class="fas fa-cog"></i>
                        <span>Configuración</span>
                    </a>
                </li>
                <li>
                    <a href="#" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Cerrar Sesión</span>
                    </a>
                </li>
            </ul>
        </div>
                <div class="main-content">
            <div class="header">
                <h1 id="page-title"><i class="fas fa-chart-simple"></i>Estadísticas del Sitio</h1>
                <div class="header-actions">
                    <a href="games.html" class="btn-view-site"><i class="fas fa-external-link-alt"></i> Ver Sitio</a>
                    <div class="user-info">
                        <div class="user-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <span><strong>Admin</strong></span>
                    </div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div id="dashboard" class="section active">
            <div class="cards">
                                                <div class="card blue">
                    <div class="icon-wrapper">
                        <i class="fas fa-eye"></i>
                    </div>
                    <h3>Visitas Hoy</h3>
                    <div class="number">0</div>
                    <div class="trend"><i class="fas fa-clock"></i>En tiempo real</div>
                </div>
                <div class="card green">
                    <div class="icon-wrapper">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Visitantes Totales</h3>
                    <div class="number">0</div>
                    <div class="trend"><i class="fas fa-calendar"></i>Desde el inicio</div>
                </div>
                <div class="card orange">
                    <div class="icon-wrapper">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <h3>Juegos Publicados</h3>
                    <div class="number">0</div>
                    <div class="trend"><i class="fas fa-database"></i>Base de datos</div>
                </div>
                <div class="card purple">
                    <div class="icon-wrapper">
                        <i class="fas fa-newspaper"></i>
                    </div>
                    <h3>Noticias Activas</h3>
                    <div class="number">0</div>
                    <div class="trend"><i class="fas fa-circle-check"></i>Publicadas</div>
                                </div>
            </div>
            </div>

            <!-- Visitantes Section -->
            <div id="visitantes" class="section">
                <div class="content-box">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2><i class="fas fa-users"></i> Registro de Visitantes</h2>
                        <button class="btn-delete" onclick="clearVisitantes()"><i class="fas fa-trash"></i> Limpiar Lista</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>IP</th>
                                <th>País</th>
                                <th>Página Visitada</th>
                                <th>Fecha y Hora</th>
                                <th>Navegador</th>
                            </tr>
                        </thead>
                        <tbody id="visitantes-table">
                            <tr>
                                <td colspan="6" style="text-align: center; padding: 40px;">
                                    <i class="fas fa-inbox" style="font-size: 48px; color: #bdc3c7; margin-bottom: 15px;"></i>
                                    <p style="color: #7f8c8d;">Aún no hay visitantes registrados</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Juegos Section -->
            <div id="juegos" class="section">
                <div class="content-box">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2><i class="fas fa-gamepad"></i> Gestión de Juegos</h2>
                        <button class="btn-add" onclick="addGame()"><i class="fas fa-plus"></i> Agregar Juego</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombre del Juego</th>
                                <th>Género</th>
                                <th>Plataforma</th>
                                <th>Fecha Publicación</th>
                                <th>Estado</th>
                                <th>Descripción</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="juegos-table">
                            <!-- Los juegos se cargarán dinámicamente aquí -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Requisitos Section -->
            <div id="requisitos" class="section">
                <div class="content-box">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2><i class="fas fa-cogs"></i> Gestión de Requisitos</h2>
                        <button class="btn-add" onclick="addRequisito()"><i class="fas fa-plus"></i> Agregar Requisito</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Juego</th>
                                <th>Requisitos del Sistema</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="requisitos-table">
                            <!-- Los requisitos se cargarán dinámicamente aquí -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Descripciones Section -->
            <div id="descripciones" class="section">
                <div class="content-box">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2><i class="fas fa-file-alt"></i> Gestión de Descripciones</h2>
                        <button class="btn-add" onclick="addDescripcion()"><i class="fas fa-plus"></i> Agregar Descripción</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Juego</th>
                                <th>Descripción</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="descripciones-table">
                            <!-- Las descripciones se cargarán dinámicamente aquí -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Noticias Section -->
            <div id="noticias" class="section">
                <div class="content-box">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2><i class="fas fa-newspaper"></i> Gestión de Noticias</h2>
                        <button class="btn-add" onclick="addNews()"><i class="fas fa-plus"></i> Agregar Noticia</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Título</th>
                                <th>Categoría</th>
                                <th>Autor</th>
                                <th>Fecha</th>
                                <th>Vistas</th>
                                    <th>Contenido</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="noticias-table">
                            <!-- Las noticias se cargarán dinámicamente aquí -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Estadísticas Section -->
            <div id="estadisticas" class="section">
                <div class="content-box">
                    <h2><i class="fas fa-chart-line"></i> Estadísticas Detalladas</h2>
                    <div class="cards" style="margin-top: 30px;">
                        <div class="card blue">
                            <div class="icon-wrapper">
                                <i class="fas fa-calendar-day"></i>
                            </div>
                            <h3>Visitas Hoy</h3>
                            <div class="number">0</div>
                            <div class="trend"><i class="fas fa-arrow-up"></i>+0% vs ayer</div>
                        </div>
                        <div class="card green">
                            <div class="icon-wrapper">
                                <i class="fas fa-calendar-week"></i>
                            </div>
                            <h3>Visitas Esta Semana</h3>
                            <div class="number">0</div>
                            <div class="trend"><i class="fas fa-arrow-up"></i>+0% vs semana pasada</div>
                        </div>
                        <div class="card orange">
                            <div class="icon-wrapper">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <h3>Visitas Este Mes</h3>
                            <div class="number">0</div>
                            <div class="trend"><i class="fas fa-arrow-up"></i>+0% vs mes pasado</div>
                        </div>
                        <div class="card purple">
                            <div class="icon-wrapper">
                                <i class="fas fa-globe"></i>
                            </div>
                            <h3>Países Visitantes</h3>
                            <div class="number">0</div>
                            <div class="trend"><i class="fas fa-map-marked-alt"></i>Geografía</div>
                        </div>
                    </div>
                    <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                        <h3 style="margin-bottom: 15px;"><i class="fas fa-chart-bar"></i> Páginas Más Visitadas</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Página</th>
                                    <th>Visitas</th>
                                    <th>Porcentaje</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="3" style="text-align: center; padding: 20px; color: #7f8c8d;">No hay datos disponibles</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Configuración Section -->
            <div id="configuracion" class="section">
                <div class="content-box">
                    <h2><i class="fas fa-cog"></i> Configuración del Sistema</h2>
                    <div style="margin-top: 30px;">
                        <h3 style="margin-bottom: 15px; color: #2c3e50;"><i class="fas fa-globe"></i> Configuración General</h3>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <p><strong>Nombre del Sitio:</strong> Gaming Info</p>
                            <p><strong>URL:</strong> www.gaminginfo.com</p>
                            <p><strong>Email de Contacto:</strong> admin@gaminginfo.com</p>
                        </div>

                        <h3 style="margin-bottom: 15px; color: #2c3e50;"><i class="fas fa-chart-line"></i> Rastreo de Visitantes</h3>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <p><strong>Estado:</strong> <span class="status-badge status-active">Activo</span></p>
                            <p><strong>Rastrear IP:</strong> Sí</p>
                            <p><strong>Rastrear Ubicación:</strong> Sí</p>
                            <p><strong>Rastrear Navegador:</strong> Sí</p>
                        </div>

                        <h3 style="margin-bottom: 15px; color: #2c3e50;"><i class="fas fa-database"></i> Base de Datos</h3>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                            <p><strong>Estado de Conexión:</strong> <span class="status-badge status-active">Conectado</span></p>
                            <p><strong>Juegos Almacenados:</strong> 3</p>
                            <p><strong>Noticias Almacenadas:</strong> 3</p>
                            <p><strong>Visitantes Registrados:</strong> 0</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Verificar autenticación
        if (localStorage.getItem('authenticated') !== 'true') {
            window.location.href = 'login.html';
        }

        // Toggle sidebar
        const toggleBtn = document.getElementById('toggle-btn');
        const sidebar = document.querySelector('.sidebar');

        toggleBtn.addEventListener('click', () => {
            sidebar.classList.toggle('collapsed');
            const icon = toggleBtn.querySelector('i');
            const span = toggleBtn.querySelector('span');
            if (sidebar.classList.contains('collapsed')) {
                icon.className = 'fas fa-arrow-right';
                span.textContent = 'Expandir';
            } else {
                icon.className = 'fas fa-bars';
                span.textContent = 'Menú';
            }
        });

        // Navegación entre secciones
        const menuItems = document.querySelectorAll('.sidebar ul li[data-section]');
        const sections = document.querySelectorAll('.section');
        const pageTitle = document.getElementById('page-title');

        const titles = {
            'dashboard': '<i class="fas fa-chart-simple"></i>Estadísticas del Sitio',
            'visitantes': '<i class="fas fa-users"></i>Registro de Visitantes',
            'juegos': '<i class="fas fa-gamepad"></i>Gestión de Juegos',
            'requisitos': '<i class="fas fa-cogs"></i>Gestión de Requisitos',
            'descripciones': '<i class="fas fa-file-alt"></i>Gestión de Descripciones',
            'noticias': '<i class="fas fa-newspaper"></i>Gestión de Noticias',
            'estadisticas': '<i class="fas fa-chart-line"></i>Estadísticas Detalladas',
            'configuracion': '<i class="fas fa-cog"></i>Configuración del Sistema'
        };

        menuItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();

                // Remover clase active de todos los items
                menuItems.forEach(mi => mi.classList.remove('active'));

                // Agregar clase active al item clickeado
                this.classList.add('active');

                // Obtener la sección a mostrar
                const sectionName = this.getAttribute('data-section');

                // Ocultar todas las secciones
                sections.forEach(section => section.classList.remove('active'));

                // Mostrar la sección seleccionada
                document.getElementById(sectionName).classList.add('active');

                // Cambiar el título
                pageTitle.innerHTML = titles[sectionName];
            });
        });

        // Función de cerrar sesión
        function logout() {
            localStorage.removeItem('authenticated');
            localStorage.removeItem('user');
            window.location.href = 'login.html';
        }

        // Función para limpiar lista de visitantes
        function clearVisitantes() {
            if (confirm('¿Estás seguro de que quieres limpiar toda la lista de visitantes? Esta acción no se puede deshacer.')) {
                localStorage.removeItem('visitantes');
                loadVisitantes();
                updateEstadisticas([]);
            }
        }

        // Función para cargar visitantes desde localStorage
        function loadVisitantes() {
            const visitantes = JSON.parse(localStorage.getItem('visitantes')) || [];
            const tableBody = document.getElementById('visitantes-table');

            if (visitantes.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align: center; padding: 40px;">
                            <i class="fas fa-inbox" style="font-size: 48px; color: #bdc3c7; margin-bottom: 15px;"></i>
                            <p style="color: #7f8c8d;">Aún no hay visitantes registrados</p>
                        </td>
                    </tr>
                `;
                return;
            }

            tableBody.innerHTML = visitantes.map(visitante => `
                <tr>
                    <td>${visitante.id}</td>
                    <td>${visitante.ip}</td>
                    <td>${visitante.pais}</td>
                    <td>${visitante.pagina}</td>
                    <td>${visitante.fecha}</td>
                    <td>${visitante.navegador}</td>
                </tr>
            `).join('');

            // Actualizar estadísticas
            updateEstadisticas(visitantes);
        }

        // Función para actualizar estadísticas
        function updateEstadisticas(visitantes) {
            const totalVisitantes = visitantes.length;
            const visitantesHoy = visitantes.filter(v => {
                const fechaVisita = new Date(v.fecha);
                const hoy = new Date();
                return fechaVisita.toDateString() === hoy.toDateString();
            }).length;

            // Actualizar números en las tarjetas
            const numberElements = document.querySelectorAll('.number');
            if (numberElements[0]) numberElements[0].textContent = visitantesHoy; // Visitas Hoy
            if (numberElements[1]) numberElements[1].textContent = totalVisitantes; // Visitantes Totales
        }

        // Cargar visitantes al cargar la página
        document.addEventListener('DOMContentLoaded', loadVisitantes);

        // Simular contador de visitas en tiempo real (solo para demo)
        let visitasHoy = 0;
        setInterval(() => {
            if (Math.random() > 0.7) { // 30% de probabilidad cada 5 segundos
                visitasHoy++;
                const visitasElements = document.querySelectorAll('.number');
                if (visitasElements[0]) {
                    visitasElements[0].textContent = parseInt(visitasElements[0].textContent) + 1;
                }
            }
        }, 5000);

        // Gestión de Juegos
        function loadGames() {
            let games = JSON.parse(localStorage.getItem('games')) || [];
            if (games.length === 0) {
                // Inicializar con juegos de ejemplo
                games = [
                    { id: 1, nombre: 'The Legend of Zelda: Tears of the Kingdom', genero: 'Aventura', plataforma: 'Nintendo Switch', fecha: '12/05/2023', estado: 'Activo', descripcion: 'Embárcate en una aventura épica en el reino de Hyrule. Explora vastos paisajes, resuelve puzzles desafiantes y enfrenta poderosos enemigos en esta secuela del clásico juego de Nintendo.', imagen: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yMCAyMEgyNEwyOCA0NEgyMFYyMFoiIGZpbGw9IiM5Q0E0QUYiLz4KPHBhdGggZD0iTTQwIDIwSDRMLDQ0IDI4SDRMMjAgNDBIMjBMMjAgMjBaIiBmaWxsPSIjOUNBNEFBIi8+Cjx0ZXh0IHg9IjMyIiB5PSI1NSIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+SmV1PC90ZXh0Pgo8L3N2Zz4=', requisitos: 'Nintendo Switch con 7GB de espacio disponible' },
                    { id: 2, nombre: 'Elden Ring', genero: 'RPG', plataforma: 'PC, PS5, Xbox', fecha: '25/02/2022', estado: 'Activo', descripcion: 'Un RPG de acción en un mundo abierto creado por FromSoftware y George R.R. Martin. Explora las Tierras Intermedias, lucha contra jefes desafiantes y forja tu propio camino hacia el trono de Elden.', imagen: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1zbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yMCAyMEgyNEwyOCA0NEgyMFYyMFoiIGZpbGw9IiM5Q0E0QUYiLz4KPHBhdGggZD0iTTQwIDIwSDRMLDQ0IDI4SDRMMjAgNDBIMjBMMjAgMjBaIiBmaWxsPSIjOUNBNEFBIi8+Cjx0ZXh0IHg9IjMyIiB5PSI1NSIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+SlBHPjwvdGV4dD4KPC9zdmc+', requisitos: 'PC: i5-8400, 12GB RAM, GTX 1060. PS5/Xbox: Consola de nueva generación' },
                    { id: 3, nombre: 'God of War Ragnarök', genero: 'Acción', plataforma: 'PS4, PS5', fecha: '09/11/2022', estado: 'Activo', descripcion: 'Únete a Kratos y Atreus en su viaje final por los Nueve Reinos. Enfrenta a dioses nórdicos, resuelve misterios familiares y descubre el destino de Ragnarök en esta épica conclusión.', imagen: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1zbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yMCAyMEgyNEwyOCA0NEgyMFYyMFoiIGZpbGw9IiM5Q0E0QUYiLz4KPHBhdGggZD0iTTQwIDIwSDRMLDQ0IDI4SDRMMjAgNDBIMjBMMjAgMjBaIiBmaWxsPSIjOUNBNEFBIi8+Cjx0ZXh0IHg9IjMyIiB5PSI1NSIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+QWN0PC90ZXh0Pgo8L3N2Zz4=', requisitos: 'PS4/PS5 con 100GB de espacio disponible' }
                ];
                localStorage.setItem('games', JSON.stringify(games));
            }

            const tableBody = document.getElementById('juegos-table');
            tableBody.innerHTML = games.map(game => `
                <tr data-game-id="${game.id}">
                    <td>${game.id}</td>
                    <td>
                        <div class="game-info">
                            <img src="${game.imagen || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1zbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMCAxMEgxNEwxOCA0MEgxMFYxMFoiIGZpbGw9IiM5Q0E0QUYiLz4KPHBhdGggZD0iTTMwIDEwSDQwTDQwIDI4SDMBTDMwIDMwSDEwTDMwIDEwWiIgZmlsbD0iIzlDQTQ5QSIvPgo8L3N2Zz4='}" alt="${game.nombre}" class="game-logo">
                            <span contenteditable="true" class="editable-cell">${game.nombre}</span>
                        </div>
                    </td>
                    <td contenteditable="true" class="editable-cell">${game.genero}</td>
                    <td contenteditable="true" class="editable-cell">${game.plataforma}</td>
                    <td contenteditable="true" class="editable-cell">${game.fecha}</td>
                    <td>
                        <div class="status-container">
                            <select class="status-select" onchange="changeGameStatus(${game.id}, this.value)">
                                <option value="Activo" ${game.estado === 'Activo' ? 'selected' : ''}>Activo</option>
                                <option value="Inactivo" ${game.estado === 'Inactivo' ? 'selected' : ''}>Inactivo</option>
                            </select>
                        </div>
                    </td>
                    <td contenteditable="true" class="editable-cell">${game.descripcion || ''}</td>
                    <td>
                        <button class="btn-action btn-save" onclick="saveGame(${game.id})"><i class="fas fa-save"></i></button>
                        <button class="btn-action btn-edit" onclick="changeImage(${game.id})"><i class="fas fa-image"></i></button>
                        <button class="btn-action btn-delete" onclick="deleteGame(${game.id})"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>
            `).join('');

            // Actualizar contador de juegos en dashboard
            updateGameCount(games.length);
        }

        function addGame() {
            let games = JSON.parse(localStorage.getItem('games')) || [];
            const newId = games.length > 0 ? Math.max(...games.map(g => g.id)) + 1 : 1;

            const tableBody = document.getElementById('juegos-table');
            const newRow = document.createElement('tr');
            newRow.setAttribute('data-game-id', newId);
            newRow.innerHTML = `
                <td>${newId}</td>
                <td>
                    <div class="game-info">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1zbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0xMCAxMEgxNEwxOCA0MEgxMFYxMFoiIGZpbGw9IiM5Q0E0QUYiLz4KPHBhdGggZD0iTTMwIDEwSDQwTDQwIDI4SDMBTDMwIDMwSDEwTDMwIDEwWiIgZmlsbD0iIzlDQTQ5QSIvPgo8L3N2Zz4=" alt="Nueva imagen" class="game-logo">
                        <span contenteditable="true" class="editable-cell"></span>
                    </div>
                </td>
                <td contenteditable="true" class="editable-cell"></td>
                <td contenteditable="true" class="editable-cell"></td>
                <td contenteditable="true" class="editable-cell"></td>
                <td><span class="status-badge status-activo">Activo</span></td>
                <td contenteditable="true" class="editable-cell"></td>
                <td>
                    <button class="btn-action btn-save" onclick="saveNewGame(${newId})"><i class="fas fa-save"></i></button>
                    <button class="btn-action btn-edit" onclick="changeImage(${newId})"><i class="fas fa-image"></i></button>
                    <button class="btn-action btn-delete" onclick="cancelAddGame(this)"><i class="fas fa-times"></i></button>
                </td>
            `;
            tableBody.appendChild(newRow);
        }

        function saveNewGame(id) {
            const row = document.querySelector(`tr[data-game-id="${id}"]`);
            if (!row) return;

            const cells = row.querySelectorAll('.editable-cell');
            const nombre = cells[0].textContent.trim();
            const genero = cells[1].textContent.trim();
            const plataforma = cells[2].textContent.trim();
            const fecha = cells[3].textContent.trim();
            const descripcion = cells[4].textContent.trim();

            if (!nombre || !genero || !plataforma || !fecha) {
                alert('Todos los campos son obligatorios');
                return;
            }

            let games = JSON.parse(localStorage.getItem('games')) || [];
            const newGame = {
                id: id,
                nombre: nombre,
                genero: genero,
                plataforma: plataforma,
                fecha: fecha,
                estado: 'Activo',
                descripcion: descripcion,
                imagen: row.querySelector('img').src
            };

            games.push(newGame);

            // Agregar entrada a descripciones si no existe
            let descripciones = JSON.parse(localStorage.getItem('descripciones')) || [];
            const existingDesc = descripciones.find(d => d.juego === newGame.nombre);
            if (!existingDesc) {
                const newDescId = descripciones.length > 0 ? Math.max(...descripciones.map(d => d.id)) + 1 : 1;
                descripciones.push({
                    id: newDescId,
                    juego: newGame.nombre,
                    descripcion: newGame.descripcion || ''
                });
                localStorage.setItem('descripciones', JSON.stringify(descripciones));
            }

            localStorage.setItem('games', JSON.stringify(games));
            loadGames();
            loadDescripciones();
        }

        function cancelAddGame(button) {
            const row = button.closest('tr');
            row.remove();
        }

        function editGame(id) {
            let games = JSON.parse(localStorage.getItem('games')) || [];
            const game = games.find(g => g.id === id);
            if (!game) return;

            const nombre = prompt('Nombre del juego:', game.nombre);
            if (!nombre) return;

            const genero = prompt('Género:', game.genero);
            if (!genero) return;

            const plataforma = prompt('Plataforma:', game.plataforma);
            if (!plataforma) return;

            const fecha = prompt('Fecha de publicación (DD/MM/YYYY):', game.fecha);
            if (!fecha) return;

            const estado = prompt('Estado (Activo/Inactivo):', game.estado);
            if (!estado) return;

            const requisitos = prompt('Requisitos del sistema:', game.requisitos);
            if (!requisitos) return;

            // Actualizar los datos del juego
            game.nombre = nombre;
            game.genero = genero;
            game.plataforma = plataforma;
            game.fecha = fecha;
            game.estado = estado;
            game.requisitos = requisitos;

            // Crear input de archivo para imagen (opcional)
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        game.imagen = event.target.result;
                        localStorage.setItem('games', JSON.stringify(games));
                        loadGames();
                    };
                    reader.readAsDataURL(file);
                } else {
                    // Si no se selecciona nueva imagen, guardar sin cambiar imagen
                    localStorage.setItem('games', JSON.stringify(games));
                    loadGames();
                }
            };

            // Mostrar diálogo para cambiar imagen (opcional)
            if (confirm('¿Quieres cambiar la imagen del juego?')) {
                input.click();
            } else {
                // Guardar sin cambiar imagen
                localStorage.setItem('games', JSON.stringify(games));
                loadGames();
            }
        }

        function saveGame(id) {
            const row = document.querySelector(`tr[data-game-id="${id}"]`);
            if (!row) return;

            const cells = row.querySelectorAll('.editable-cell');
            const nombre = cells[0].textContent.trim();
            const genero = cells[1].textContent.trim();
            const plataforma = cells[2].textContent.trim();
            const fecha = cells[3].textContent.trim();
            const descripcion = cells[4].textContent.trim();

            if (!nombre || !genero || !plataforma || !fecha) {
                alert('Todos los campos son obligatorios');
                return;
            }

            let games = JSON.parse(localStorage.getItem('games')) || [];
            const game = games.find(g => g.id === id);
            if (!game) return;

            game.nombre = nombre;
            game.genero = genero;
            game.plataforma = plataforma;
            game.fecha = fecha;
            game.descripcion = descripcion;

            localStorage.setItem('games', JSON.stringify(games));
            showSuccessNotification();
        }

        function changeImage(id) {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        let games = JSON.parse(localStorage.getItem('games')) || [];
                        const game = games.find(g => g.id === id);
                        if (!game) return;

                        game.imagen = event.target.result;
                        localStorage.setItem('games', JSON.stringify(games));
                        loadGames();
                        alert('Imagen cambiada exitosamente');
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        }

        function deleteGame(id) {
            if (!confirm('¿Estás seguro de que quieres eliminar este juego?')) return;

            let games = JSON.parse(localStorage.getItem('games')) || [];
            games = games.filter(g => g.id !== id);
            localStorage.setItem('games', JSON.stringify(games));
            loadGames();
        }

        function updateGameCount(count) {
            const gameCountElements = document.querySelectorAll('.number');
            if (gameCountElements[2]) { // Juegos Publicados
                gameCountElements[2].textContent = count;
            }
        }

        // Gestión de Noticias
        function loadNews() {
            let news = JSON.parse(localStorage.getItem('news')) || [];
            // Eliminar noticias con vistas sospechosas (>=1000)
            const originalCount = news.length;
            news = news.filter(n => (n.vistas || 0) < 1000);
            if (news.length !== originalCount) {
                localStorage.setItem('news', JSON.stringify(news));
            }

            const tableBody = document.getElementById('noticias-table');

                if (news.length === 0) {
                    tableBody.innerHTML = '<tr><td colspan="9" style="text-align: center; padding: 20px; color: #7f8c8d;">No hay noticias. Crea una haciendo clic en "Agregar Noticia"</td></tr>';
                    updateNewsCount(0);
                    return;
                }

            tableBody.innerHTML = news.map(item => `
                <tr data-news-id="${item.id}">
                    <td>${item.id}</td>
                    <td contenteditable="true" class="editable-cell">${item.titulo}</td>
                    <td contenteditable="true" class="editable-cell">${item.categoria}</td>
                    <td contenteditable="true" class="editable-cell">${item.autor}</td>
                    <td contenteditable="true" class="editable-cell">${item.fecha}</td>
                    <td><strong style="color: #27ae60;">${item.vistas || 0}</strong></td>
                    <td contenteditable="true" class="editable-cell">${item.contenido || ''}</td>
                    <td>
                        <select class="status-select" onchange="changeNewsStatus(${item.id}, this.value)">
                            <option value="Publicado" ${item.estado === 'Publicado' ? 'selected' : ''}>Publicado</option>
                            <option value="Borrador" ${item.estado === 'Borrador' ? 'selected' : ''}>Borrador</option>
                        </select>
                    </td>
                    <td>
                        <button class="btn-action btn-save" onclick="saveNews(${item.id})"><i class="fas fa-save"></i></button>
                        <button class="btn-action btn-delete" onclick="deleteNews(${item.id})"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>
            `).join('');

            // Actualizar contador de noticias en dashboard
            updateNewsCount(news.length);
        }

        function addNews() {
                const titulo = prompt('Título:');
            if (!titulo) return;

            const categoria = prompt('Categoría:');
            if (!categoria) return;

            const autor = prompt('Autor:');
            if (!autor) return;

            const fecha = prompt('Fecha (DD/MM/YYYY):');
            if (!fecha) return;

                const contenido = prompt('Contenido de la noticia:');
                if (!contenido) return;

            let news = JSON.parse(localStorage.getItem('news')) || [];
            const newId = news.length > 0 ? Math.max(...news.map(n => n.id)) + 1 : 1;

            const newNews = {
                id: newId,
                titulo: titulo,
                categoria: categoria,
                autor: autor,
                fecha: fecha,
                    contenido: contenido,
                    vistas: 0,
                estado: 'Publicado'
            };

            news.push(newNews);
            localStorage.setItem('news', JSON.stringify(news));
            loadNews();
        }

        function editNews(id) {
            let news = JSON.parse(localStorage.getItem('news')) || [];
            const item = news.find(n => n.id === id);
            if (!item) return;

            const titulo = prompt('Título de la noticia:', item.titulo);
            if (!titulo) return;

            const categoria = prompt('Categoría:', item.categoria);
            if (!categoria) return;

            const autor = prompt('Autor:', item.autor);
            if (!autor) return;

            const fecha = prompt('Fecha (DD/MM/YYYY):', item.fecha);
            if (!fecha) return;

                const contenido = prompt('Contenido:', item.contenido || '');
                if (!contenido) return;

            const estado = prompt('Estado (Publicado/Borrador):', item.estado);
            if (!estado) return;

            item.titulo = titulo;
            item.categoria = categoria;
            item.autor = autor;
            item.fecha = fecha;
                item.contenido = contenido;
            item.estado = estado;

            localStorage.setItem('news', JSON.stringify(news));
            loadNews();
        }

        function deleteNews(id) {
            if (!confirm('¿Estás seguro de que quieres eliminar esta noticia?')) return;

            let news = JSON.parse(localStorage.getItem('news')) || [];
            news = news.filter(n => n.id !== id);
            localStorage.setItem('news', JSON.stringify(news));
            loadNews();
        }

        

        // Editar contenido completo de la noticia (prompt simple)
        function editContent(id) {
            let news = JSON.parse(localStorage.getItem('news')) || [];
            const item = news.find(n => n.id === id);
            if (!item) return;

            const contenido = prompt('Editar contenido:', item.contenido || '');
            if (contenido === null) return; // cancelado

            item.contenido = contenido;
            localStorage.setItem('news', JSON.stringify(news));
            showSuccessNotification();
            loadNews();
        }


        function changeNewsStatus(id, newStatus) {
            let news = JSON.parse(localStorage.getItem('news')) || [];
            const item = news.find(n => n.id === id);
            if (!item) return;

            item.estado = newStatus;
            localStorage.setItem('news', JSON.stringify(news));
            showSuccessNotification();
        }

        function saveNews(id) {
            const row = document.querySelector(`tr[data-news-id="${id}"]`);
            if (!row) return;

            const cells = row.querySelectorAll('.editable-cell');
            // Orden: titulo, categoria, autor, fecha, contenido
            const titulo = cells[0] ? cells[0].textContent.trim() : '';
            const categoria = cells[1] ? cells[1].textContent.trim() : '';
            const autor = cells[2] ? cells[2].textContent.trim() : '';
            const fecha = cells[3] ? cells[3].textContent.trim() : '';
            const contenido = cells[4] ? cells[4].textContent.trim() : '';

            if (!titulo || !categoria || !autor || !fecha) {
                alert('Título, categoría, autor y fecha son obligatorios');
                return;
            }

            let news = JSON.parse(localStorage.getItem('news')) || [];
            const item = news.find(n => n.id === id);
            if (!item) return;

            item.titulo = titulo;
            item.categoria = categoria;
            item.autor = autor;
            item.fecha = fecha;
            item.contenido = contenido;

            localStorage.setItem('news', JSON.stringify(news));
            showSuccessNotification();
            loadNews();
        }

        function updateNewsCount(count) {
            const newsCountElements = document.querySelectorAll('.number');
            if (newsCountElements[3]) { // Noticias Activas
                newsCountElements[3].textContent = count;
            }
        }

        // Gestión de Requisitos
        function loadRequisitos() {
            let requisitos = JSON.parse(localStorage.getItem('requisitos')) || [];
            if (requisitos.length === 0) {
                // Inicializar con requisitos de ejemplo
                requisitos = [
                    { id: 1, juego: 'The Legend of Zelda: Tears of the Kingdom', requisitos: 'Nintendo Switch con 7GB de espacio disponible' },
                    { id: 2, juego: 'Elden Ring', requisitos: 'PC: i5-8400, 12GB RAM, GTX 1060. PS5/Xbox: Consola de nueva generación' },
                    { id: 3, juego: 'God of War Ragnarök', requisitos: 'PS4/PS5 con 100GB de espacio disponible' }
                ];
                localStorage.setItem('requisitos', JSON.stringify(requisitos));
            }

            const tableBody = document.getElementById('requisitos-table');
            tableBody.innerHTML = requisitos.map(req => `
                <tr data-requisito-id="${req.id}">
                    <td>${req.id}</td>
                    <td contenteditable="true" class="editable-cell">${req.juego}</td>
                    <td contenteditable="true" class="editable-cell">${req.requisitos.replace(/\n/g, '<br>')}</td>
                    <td>
                        <button class="btn-action btn-save" onclick="saveRequisito(${req.id})"><i class="fas fa-save"></i></button>
                        <button class="btn-action btn-delete" onclick="deleteRequisito(${req.id})"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>
            `).join('');
        }

        function addRequisito() {
            const juego = prompt('Nombre del juego:');
            if (!juego) return;

            const reqSistema = prompt('Requisitos del sistema:');
            if (!reqSistema) return;

            let requisitos = JSON.parse(localStorage.getItem('requisitos')) || [];
            const newId = requisitos.length > 0 ? Math.max(...requisitos.map(r => r.id)) + 1 : 1;

            const newReq = {
                id: newId,
                juego: juego,
                requisitos: reqSistema
            };

            requisitos.push(newReq);
            localStorage.setItem('requisitos', JSON.stringify(requisitos));
            loadRequisitos();
        }

        function editRequisito(id) {
            let requisitos = JSON.parse(localStorage.getItem('requisitos')) || [];
            const req = requisitos.find(r => r.id === id);
            if (!req) return;

            const juego = prompt('Nombre del juego:', req.juego);
            if (!juego) return;

            const reqSistema = prompt('Requisitos del sistema:', req.requisitos);
            if (!reqSistema) return;

            req.juego = juego;
            req.requisitos = reqSistema;

            localStorage.setItem('requisitos', JSON.stringify(requisitos));
            loadRequisitos();
        }

        function saveRequisito(id) {
            const row = document.querySelector(`tr[data-requisito-id="${id}"]`);
            if (!row) return;

            const cells = row.querySelectorAll('.editable-cell');
            const juego = cells[0].textContent.trim();
            const requisitos = cells[1].textContent.trim();

            if (!juego || !requisitos) {
                alert('Todos los campos son obligatorios');
                return;
            }

            let requisitosList = JSON.parse(localStorage.getItem('requisitos')) || [];
            const req = requisitosList.find(r => r.id === id);
            if (!req) return;

            req.juego = juego;
            req.requisitos = requisitos;

            localStorage.setItem('requisitos', JSON.stringify(requisitosList));
            alert('Requisito guardado exitosamente');
        }

        function deleteRequisito(id) {
            if (!confirm('¿Estás seguro de que quieres eliminar este requisito?')) return;

            let requisitos = JSON.parse(localStorage.getItem('requisitos')) || [];
            requisitos = requisitos.filter(r => r.id !== id);
            localStorage.setItem('requisitos', JSON.stringify(requisitos));
            loadRequisitos();
        }

        // Gestión de Descripciones
        function loadDescripciones() {
            let descripciones = JSON.parse(localStorage.getItem('descripciones')) || [];
            if (descripciones.length === 0) {
                // Inicializar con descripciones de ejemplo
                descripciones = [
                    { id: 1, juego: 'The Legend of Zelda: Tears of the Kingdom', descripcion: 'Embárcate en una aventura épica en el reino de Hyrule. Explora vastos paisajes, resuelve puzzles desafiantes y enfrenta poderosos enemigos en esta secuela del clásico juego de Nintendo.' },
                    { id: 2, juego: 'Elden Ring', descripcion: 'Un RPG de acción en un mundo abierto creado por FromSoftware y George R.R. Martin. Explora las Tierras Intermedias, lucha contra jefes desafiantes y forja tu propio camino hacia el trono de Elden.' },
                    { id: 3, juego: 'God of War Ragnarök', descripcion: 'Únete a Kratos y Atreus en su viaje final por los Nueve Reinos. Enfrenta a dioses nórdicos, resuelve misterios familiares y descubre el destino de Ragnarök en esta épica conclusión.' }
                ];
                localStorage.setItem('descripciones', JSON.stringify(descripciones));
            }

            const tableBody = document.getElementById('descripciones-table');
            tableBody.innerHTML = descripciones.map(desc => `
                <tr data-descripcion-id="${desc.id}">
                    <td>${desc.id}</td>
                    <td contenteditable="true" class="editable-cell">${desc.juego}</td>
                    <td contenteditable="true" class="editable-cell">${desc.descripcion.replace(/\n/g, '<br>')}</td>
                    <td>
                        <button class="btn-action btn-save" onclick="saveDescripcion(${desc.id})"><i class="fas fa-save"></i></button>
                        <button class="btn-action btn-delete" onclick="deleteDescripcion(${desc.id})"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>
            `).join('');
        }

        function addDescripcion() {
            const juego = prompt('Nombre del juego:');
            if (!juego) return;

            const descripcion = prompt('Descripción del juego:');
            if (!descripcion) return;

            let descripciones = JSON.parse(localStorage.getItem('descripciones')) || [];
            const newId = descripciones.length > 0 ? Math.max(...descripciones.map(d => d.id)) + 1 : 1;

            const newDesc = {
                id: newId,
                juego: juego,
                descripcion: descripcion
            };

            descripciones.push(newDesc);
            localStorage.setItem('descripciones', JSON.stringify(descripciones));
            loadDescripciones();
        }

        function editDescripcion(id) {
            let descripciones = JSON.parse(localStorage.getItem('descripciones')) || [];
            const desc = descripciones.find(d => d.id === id);
            if (!desc) return;

            const juego = prompt('Nombre del juego:', desc.juego);
            if (!juego) return;

            const descripcion = prompt('Descripción del juego:', desc.descripcion);
            if (!descripcion) return;

            desc.juego = juego;
            desc.descripcion = descripcion;

            localStorage.setItem('descripciones', JSON.stringify(descripciones));
            loadDescripciones();
        }

        function saveDescripcion(id) {
            const row = document.querySelector(`tr[data-descripcion-id="${id}"]`);
            if (!row) return;

            const cells = row.querySelectorAll('.editable-cell');
            const juego = cells[0].textContent.trim();
            const descripcion = cells[1].textContent.trim();

            if (!juego || !descripcion) {
                alert('Todos los campos son obligatorios');
                return;
            }

            let descripciones = JSON.parse(localStorage.getItem('descripciones')) || [];
            const desc = descripciones.find(d => d.id === id);
            if (!desc) return;

            desc.juego = juego;
            desc.descripcion = descripcion;

            // Actualizar también la descripción en los juegos
            let games = JSON.parse(localStorage.getItem('games')) || [];
            const game = games.find(g => g.nombre === juego);
            if (game) {
                game.descripcion = descripcion;
                localStorage.setItem('games', JSON.stringify(games));
            }

            localStorage.setItem('descripciones', JSON.stringify(descripciones));
            alert('Descripción guardada exitosamente');
        }

        function deleteDescripcion(id) {
            if (!confirm('¿Estás seguro de que quieres eliminar esta descripción?')) return;

            let descripciones = JSON.parse(localStorage.getItem('descripciones')) || [];
            descripciones = descripciones.filter(d => d.id !== id);
            localStorage.setItem('descripciones', JSON.stringify(descripciones));
            loadDescripciones();
        }

        function changeGameStatus(id, newStatus) {
            let games = JSON.parse(localStorage.getItem('games')) || [];
            const game = games.find(g => g.id === id);
            if (!game) return;

            game.estado = newStatus;
            localStorage.setItem('games', JSON.stringify(games));
            showSuccessNotification();
        }

        function showSuccessNotification() {
            // Crear modal de éxito
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
            `;

            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                padding: 30px;
                border-radius: 15px;
                text-align: center;
                max-width: 400px;
                width: 90%;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            `;

            modalContent.innerHTML = `
                <div style="font-size: 48px; color: #27ae60; margin-bottom: 20px;">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2 style="color: #2c3e50; margin-bottom: 15px; font-size: 24px;">¡Guardado Exitosamente!</h2>
                <p style="color: #7f8c8d; margin-bottom: 25px;">Los cambios han sido guardados correctamente en todas las secciones.</p>
                <button onclick="this.parentElement.parentElement.remove()" style="
                    background: #27ae60;
                    color: white;
                    border: none;
                    padding: 12px 30px;
                    border-radius: 8px;
                    font-size: 16px;
                    cursor: pointer;
                    transition: background 0.3s ease;
                " onmouseover="this.style.background='#229954'" onmouseout="this.style.background='#27ae60'">
                    Aceptar
                </button>
            `;

            modal.appendChild(modalContent);
            document.body.appendChild(modal);

            // Auto-remover después de 3 segundos
            setTimeout(() => {
                if (modal.parentElement) {
                    modal.remove();
                }
            }, 3000);
        }

        // Cargar juegos, noticias, requisitos y descripciones al cargar la página
        document.addEventListener('DOMContentLoaded', function() {
            loadVisitantes();
            loadGames();
            loadNews();
            loadRequisitos();
            loadDescripciones();
        });
    </script>
</body>
</html>
